<!DOCTYPE html>
<% include ../layout/Defaultlayout %>
 
<!-- <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
 -->
  <script src="http://localhost:5000/nezaker/app/User/ChildController.js"></script>
<section id="contact"  ng-controller="ChildController" ng-init="LoadUserProfile()">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
                    <h3 class="section-heading"> تعديل بيانات حسابك الخاص</h3>       
      </div>
    </div>
    <div class="row">
     <div class="col-lg-12 text-center">
        <h6 class="section-subheading">   </h6>
      </div>
    </div>
    <form id="EditUser" name="EditUser"  role="form" data-toggle="validator">
      <div class="row">
        <div class="col-sm-2">
         <!-- <img style="width:100px;" ng-show="!!file" 
          ngf-thumbnail="file || 'uploads/{{user.photo_name}}' || 'img/team/user.jpg'" class="rounded-circle" />
         <input     type="file"  ngf-select    ng-model="file"       name="file" 
         ngf-pattern="'image/*'"       accept="image/*" ngf-max-size="20MB"     />
           
        <i ng-show="file.$error.required">*required</i><br>
        <i ng-show="file.$error.maxSize">File too large 
        {{file.size / 1000000|number:1}}MB: max 20M</i> -->
        </div>
        <div class="col-md-5">
         <div class="form-group">
           <input class="form-control" id="first_name" ng-value="user.first_name"
             ng-model="user.first_name" name ="first_name" type="text" placeholder="الإسم الأول*" required data-validation-required-message="الإسم الاول">
         </div>
        <div class="form-group">
            <input class="form-control" id="last_name" name ="last_name" 
             ng-model="user.last_name"   ng-value="user.last_name" type="text" placeholder="الإسم الثاني*" required data-validation-required-message="الإسم الثاني">
        </div>
        <div class="form-group">
              <input class="form-control" id="phone_numbers" name ="phone_numbers" 
             ng-model="user.phone_numbers" ng-value="user.phone_numbers" maxlength="15" pattern="\d*" placeholder="رقم التليفون*" required data-validation-required-message="رقم التليفون.">
        </div>
         <div class="form-group">
             <select class="form-control" ng-model ="user.city_id" id ="city"   >
            <option value="">اختر المدينه</option>
                 <option ng-repeat="city in Usercities" ng-value="city.id" 
             ng-selected="city.id==user.city_id">{{city.name}}</option> 
          </select>

          </div>
        </div>
     
        <div class="col-md-5">
           <div class="form-group">
            <input  type="date" maxlength="100" id="txtDoB" ng-value="user.birth_date" ng-model="user.birth_date" max-date="-1" class="form-control"    required>
            </div>
            <div class="form-group">
              <input class="form-control" id="password" ng-model="user_password" type="password" placeholder="كلمة المرور *" />
            </div>
            <div class="form-group">
              <input type="password" class="form-control" id="inputPasswordConfirm" data-match="#password" data-match-error=" these don't match" placeholder="Confirm" >
        <div class="help-block with-errors"></div>
            </div>
              <div class="form-group">
     <div class="cc-selector" >  
     
     <div  ng-repeat="accountType in  Useraccount_types">  
      <input id={{accountType.id}} type="radio" name="AccountType" ng-value="accountType.id" ng-model="user.accountType_id"  />
        <label class="drinkcard-cc " for={{accountType.id}}  
        ng-style="{'background-image':'url(nezaker/icons/'+accountType.iconUrl+')'}" ></label>
        <label class="drinkcard-cc " >{{accountType.name}}</label>
</div>
</div>
</div>

                            <!--  <div class="cc-selector">
        <input id="FatherAccountType" type="radio" name="AccountType" value="FatherAccountType" />
        <label class="drinkcard-cc FatherAccountType" for="FatherAccountType"></label>
        <input id="MotherAccountType" type="radio" name="AccountType" value="MotherAccountType" />
        <label class="drinkcard-cc MotherAccountType" for="MotherAccountType"></label>
        <input id="TeacherAccountType" type="radio" name="AccountType" value="TeacherAccountType" />
        <label class="drinkcard-cc TeacherAccountType" for="TeacherAccountType"></label>
    </div> -->

      

      </div></div>
      <div class="row">

       <div class="col-lg-12 text-center">
              <div class="form-group">
<!--               <input class="btn btn-xl" type="submit" value="تعديل">
 -->
          <button class="btn btn-primary" data-dismiss="modal" type="submit" ng-click="SubmitForm()">  تعديل 
           </button>
            </div>

          
          </div>


    </div>
       <div class="row" ng-hide="user.accountType_id==<%=ConstantVal.AccountTypes.student%>||user.accountType_id==<%=ConstantVal.AccountTypes.teacher%>" >
       <div class="col-lg-12 text-center"  >
       <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#AddChildPopup" ng-click="LoadChildForm(<%=user.id%>)">اضافة ابن اخر</button>
 
          <table class="table table-striped table-hover" >
  <tr class="success">
    <td>
      الاسم
    </td>
    <td>
      البريد الاليكترونى
    </td>
    <td>
    الصف الدراسى
    </td>
  <td></td>
  </tr>
  <tr  ng-repeat="child in childern" >
    <td>{{child.first_name}}</td>
    <td>{{child.email}}</td>
    <td>{{child.grade.name}}</td>
     <td>
     <button  ng-click= "LoadUpdateChildForm(child.id,<%=user.id%>,<%=JSON.stringify(ConstantVal.status)%>)"
        data-toggle="modal" href="#AddChildPopup" class="btn btn-primary btn-sm">Edit </button>

            <button confirmed-click="deleteUser({{child.id}})"
             ng-confirm-click="تأكيد الحذف ؟" class="btn btn-primary btn-sm">Delete </button>
      </td>
  </tr>

          </table>

            <div id="dvPages">
        <nav aria-label="...">
          <ul class="pagination">
            <li class="page-item" style="margin: 2px;">
              <a class="btn btn-primary" ng-class="Pages > 0 ? '' :'active'" ng-disabled="Pages > 0" ng-click="Prev(activePage)" tabindex="-1" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
              <span class="sr-only">Previous</span>
              </a>
            </li>
            <li class="page-item" ng-repeat="page in Pages" style="margin: 2px;">
             <a class="btn btn-primary" ng-class="activePage == page ? '' :'active'" ng-disabled="activePage == page" ng-click="LoadChildGrid(<%=user.id%>,page)" aria-label="{{page}}">{{page}} <span class="sr-only">(current)</span></a>
            </li>
            <li class="page-item" style="margin: 2px;">
              <a class="btn btn-primary" ng-class="Pages > 0 ? '' :'active'" ng-disabled="Pages > 0" ng-click="Next(activePage)" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
              <span class="sr-only">Next</span>
              </a>
              </li>
             </ul>
            </nav>
            </div>
 
      <!--Pagination-->
      </div>
      <!--Pagination-->
    </div>
</div>
                  
                   
</div>   
 </form>

        </div>
    <% include ../Account/AddChildPopup %>

    </section>

    <% include ../layout/footer %>
